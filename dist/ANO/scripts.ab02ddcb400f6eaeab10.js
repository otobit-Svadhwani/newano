var phonevalue1,phonevalue2,cursorposition,zChar=new Array(" ","(",")","-","."),maxphonelength=13;function ParseForNumber1(r){phonevalue1=ParseChar(r.value,zChar)}function ParseForNumber2(r){phonevalue2=ParseChar(r.value,zChar)}function backspacerUP(r,o){if((o=o||window.event).which)var e=o.which;else e=o.keyCode;ParseForNumber1(r),e>=48&&ValidatePhone(r)}function backspacerDOWN(r,o){o=o||window.event,ParseForNumber2(r)}function GetCursorPosition(){var r=phonevalue1,o=phonevalue2,e=!1;for(i=0;i<r.length;i++)r.substring(i,1)!=o.substring(i,1)&&(e||(cursorposition=i,e=!0))}function ValidatePhone(r){var o=phonevalue1;if((o=o.replace(/[^\d]*/gi,"")).length<3?r.value=o:3==o.length?(pp=o,d4=o.indexOf("("),d5=o.indexOf(")"),-1==d4&&(pp="("+pp),-1==d5&&(pp+=")"),r.value=pp):o.length>3&&o.length<7?(o="("+o,l30=o.length,p30=o.substring(0,4),p30+=")",p31=o.substring(4,l30),pp=p30+p31,r.value=pp):o.length>=7&&(o="("+o,l30=o.length,p30=o.substring(0,4),p30+=")",p31=o.substring(4,l30),pp=p30+p31,l40=pp.length,p40=pp.substring(0,8),p40+="-",p41=pp.substring(8,l40),ppp=p40+p41,r.value=ppp.substring(0,maxphonelength)),GetCursorPosition(),cursorposition>=0){0==cursorposition?cursorposition=2:cursorposition<=2?cursorposition+=1:cursorposition<=5||6==cursorposition?cursorposition+=2:7==cursorposition?(cursorposition+=4,e1=r.value.indexOf(")"),e2=r.value.indexOf("-"),e1>-1&&e2>-1&&e2-e1==4&&(cursorposition-=1)):cursorposition<11?cursorposition+=3:11==cursorposition?cursorposition+=1:cursorposition>=12&&(cursorposition=cursorposition);var e=r.createTextRange();e.moveStart("character",cursorposition),e.moveEnd("character",cursorposition-r.value.length),e.select()}}function ParseChar(r,o){for(zChar=null==o.length?new Array(o):o,i=0;i<zChar.length;i++){sNewStr="";for(var e=0,n=r.indexOf(o[i]);-1!=n;)sNewStr+=r.substring(e,n),e=n+1,n=r.indexOf(o[i],e);sNewStr+=r.substring(r.lastIndexOf(o[i])+1,r.length),r=sNewStr}return sNewStr}var clipboard=new Clipboard(".btn");clipboard.on("success",function(r){console.log(r)}),clipboard.on("error",function(r){console.log(r)});